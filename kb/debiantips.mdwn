## Debian Tips

### Useful packages

apt-file - Search for packages containing a particular file
auto-apt - Install required packages automatically
bwm-ng - Realtime bandwidth monitor
scponly - restricted shell useful for giving users access to the filesystem, but not execution 


### cloning an apt-get installation

Do this command on the source system to create a list of packages:

    dpkg --get-selections > list.txt

Do this command on the target system to load the list of packages:

    dpkg --set-selections < list.txt

Do this to install the packages:

    aptitude install

### re-configuring a package

    dpkg-reconfigure <package>

### cleaning out the package cache

removing all .deb files

    apt-get clean

removing only old .deb files

    apt-get autoclean

### disabling APT PDiffs

They're only useful for those on dialup - for the rest of us they make apt-get updating slower.

Add the following line to /etc/apt/apt.conf.d/20archive

    Acquire::PDiffs "false";

### removing orphaned packages

To get a list of what will be removed:

    deborphan | sudo xargs apt-get remove --purge

To actually remove them:

    deborphan | sudo xargs apt-get remove --purge --yes

### Cleaning up after removing packages

List all packages that have been removed, but that may have left conf files behind.

    dpkg -l | grep -e "^rc"

If you don't need the conf files, these can safely be removed.

    aptitude purge <package name>

### Static Routes

To add a persistant static route:

    auto eth0
    iface eth0 inet static
        address 192.168.1.42
        netmask 255.255.255.128
        up route add -net 192.168.1.128 netmask 255.255.255.128 gw 192.168.1.2
        down route del -net 192.168.1.128 netmask 255.255.255.128 gw 192.168.1.2


### Misc commands

List commonly used commands

    history 1|awk '{print $2}'|awk 'BEGIN {FS="|"} {print $1}'|sort|uniq -c|sort -nr|head -10
